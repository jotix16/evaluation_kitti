<launch>
  <param name="/use_sim_time" value="false" />
  <arg name="rviz" default="false" />
  <arg name="bag_record" default="true" />

  <node pkg="loam_velodyne_kitti_ros" type="scanRegistrationKittiRos" name="scanRegistrationKittiRos" args="$(dirname)/2011_09_30/2011_09_30_drive_0016_sync 04" output="screen"/>

  <!-- <node pkg="loam_velodyne_kitti_ros" type="scanRegistrationKittiRos" name="scanRegistrationKittiRos" output="screen"/> -->

  <node pkg="loam_velodyne_kitti_ros" type="laserOdometryKittiRos" name="laserOdometryKittiRos" respawn="true"/>
  <node pkg="loam_velodyne_kitti_ros" type="record_loam_odometry.py" name="record_loam_odometry" args="_path:=$(dirname)/" respawn="true"/>
  <node pkg="loam_velodyne_kitti_ros" type="remap_topics.py" name="remap_topics" output="screen" respawn="true"/>

  <node pkg="loam_velodyne_kitti_ros" type="laserMappingKittiRos" name="laserMappingKittiRos"/>
  <node pkg="loam_velodyne_kitti_ros" type="transformMaintenanceKittiRos" name="transformMaintenanceKittiRos"/>

  <group if="$(arg rviz)">
    <node launch-prefix="nice" pkg="rviz" type="rviz" name="rviz" args="-d $(find loam_velodyne_kitti_ros)/rviz_cfg/loam_velodyne.rviz" />
  </group>

  <node if="$(arg bag_record)" pkg="rosbag" type="record" name="rosbagrecord" args=" /lidar/odom -O $(dirname)/bag/loam.bag" required="true"/>
</launch>