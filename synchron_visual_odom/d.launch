<launch>
    <!-- Bag nr -->
    <arg name="bag_nr"                default="6" />

    <!-- Topics -->
    <arg name="odom_topic_list" default="[/odom]"/>
    <arg name="imu_topic_list" default="[/kitti/oxts/imu]"/>

    <!-- Frames -->
    <arg name="map_frame"                default="map" />
    <arg name="odom_frame"               default="odom" />
    <arg name="base_link_frame"          default="base_link" />
    <arg name="base_link_frame2"          default="baselink" />
    <arg name="config_path"              default="$(dirname)/config.json" />

    <!-- Transformations -->
    <arg name="map_odom_args"            default="0 0 0 0 0 0 $(arg map_frame) $(arg odom_frame)" />
    <arg name="odom_bl_args"             default="0 0 0 0 0 0 $(arg odom_frame) $(arg base_link_frame)" />
    <arg name="bl_bl_args"              default="1.5707963267948966 0 0 0 0 0 $(arg base_link_frame) $(arg base_link_frame2)" />
    <arg name="bl_imu_args"              default="-1.405 0.32 0.93 0 0 0 $(arg base_link_frame) imu_link" />

    <!-- Publish Transformations -->
    <node pkg="tf2_ros" type="static_transform_publisher" name="map_odom"  args="$(arg map_odom_args)" />
    <node pkg="tf2_ros" type="static_transform_publisher" name="odom_bl" args="$(arg odom_bl_args)" />
    <node pkg="tf2_ros" type="static_transform_publisher" name="bl_imu" args="$(arg bl_imu_args)" />
    <node pkg="tf2_ros" type="static_transform_publisher" name="bl_bl" args="$(arg bl_bl_args)" />

    <arg name="bag_play"        default="true" />
    <arg if="$(arg bag_play)"   name="bag_play_args" default="$(dirname)/t_seq_0.bag" />
    <node if="$(arg bag_play)" pkg="rosbag" type="play" name="rosbagplay" args=" $(arg bag_play_args) --clock -d 5 -s 0 " required="true" output="screen"/>

    <arg name="rviz"            default="true" />
    <arg if="$(arg rviz)"       name="rviz_args"     default="$(dirname)/config.rviz" />
    <node if="$(arg rviz)" type="rviz" name="rviz" pkg="rviz" args="" />

</launch>
